% Предметная область – спортивные соревнования.
% Каждое соревнование может быть описано структурой: ранг соревнований, вид спорта,
% год проведения, страна проведения, список команд - участников.
% Команды - участники могут быть описаны следующей структурой: название
% команды, страна, результаты соревнований.
% Результаты соревнований могут быть описаны списком структур: название
% команды – соперника, страна, тип результата (выигрыш, проигрыш, ничья).

competition('Чемпионат', 'Футбол', 2020, 'Англия',
            [team('Сборная Англии', 'Англия',
                  [result('Сборная Фрнации', 'Франция', 'Выигрыш'),
                   result('Сборная Испании', 'Испания', 'Проигрыш')])],
            [team('Сборная Фрнации', 'Франция',
                  [result('Сборная Англии', 'Англия', 'Проигрыш'),
                   result('Сборная Испании', 'Испания', 'Проигрыш')])],
            [team('Сборная Испании', 'Испания',
                  [result('Сборная Англии', 'Англия', 'Выигрыш'),
                   result('Сборная Фрнации', 'Франция', 'Выигрыш')])]
           ).

competition('Чемпионат', 'Баскетбол', 2021, 'США',
            [team('Сборная США', 'США',
                  [result('Сборная Канады', 'Канада', 'Выигрыш'),
                   result('Сборная Мексики', 'Мексика', 'Выигрыш'),
                   result('Сборная Франции', 'Франция', 'Проигрыш')])],
            [team('Сборная Канады', 'Канада',
                  [result('Сборная США', 'США', 'Проигрыш'),
                   result('Сборная Мексики', 'Мексика', 'Ничья'),
                   result('Сборная Франции', 'Франция', 'Выигрыш')])],
            [team('Сборная Мексики', 'Мексика',
                  [result('Сборная США', 'США', 'Проигрыш'),
                   result('Сборная Канады', 'Канада', 'Ничья'),
                   result('Сборная Франции', 'Франция', 'Выигрыш')])],
            [team('Сборная Франции', 'Франция',
                  [result('Сборная США', 'США', 'Выигрыш'),
                   result('Сборная Канады', 'Канада', 'Проигрыш'),
                   result('Сборная Мексики', 'Мексика', 'Проигрыш')])]
           ).

competition('Дружеский матч', 'Футбол', 2022, 'Россия',
	[team('Зенит', 'Россия',
              [result('Спартак', 'Россия', 'Выигрыш')]),
         team('Спартак', 'Россия',
              [result('Зенит', 'Россия', 'Проигрыш')])]).

competition('Турнир', 'Волейбол', 2023, 'Бразилия',
            [team('Нова Серрана', 'Бразилия',
                  [result('Эквип Джекинс', 'Бразилия', 'Проигрыш'),
                   result('Трез Волей', 'Бразилия', 'Выигрыш')])],
            [team('Эквип Джекинс', 'Бразилия',
                  [result('Нова Серрана', 'Бразилия', 'Выигрыш'),
                   result('Трез Волей', 'Бразилия', 'Ничья')])],
            [team('Трез Волей', 'Бразилия',
                  [result('Эквип Джекинс', 'Бразилия', 'Ничья'),
                   result('Нова Серрана', 'Бразилия', 'Проигрыш')])]

           ).

competition('Олимпийские игры', 'Борьба', 2016, 'США',
           [team('Команда США', 'США',
                 [result('Команда Япония', 'Япония', 'Проигрыш')])],
           [team('Команда Россия', 'Россия',
                 [result('Команда Дания', 'Дания', 'Выигрыш')])],
           [team('Команда Дания', 'Дания',
                 [result('Команда Россия', 'Россия', 'Проигрыш')])],
           [team('Команда Япония', 'Япония',
                 [result('Команда США', 'США', 'Выигрыш')])],
           [team('Команда Куба', 'Куба',
                 [result('Команда Турция', 'Турция', 'Выигрыш')])],
           [team('Команда Турция', 'Турция',
                 [result('Команда Куба', 'Куба', 'Проигрыш')])]


           ).

% 1 Найти год, в который участвовало максимальное число команд, в
% заданном ранге соревнований;
maxTeamsYearList(Rank, YearList) :-
    findall(NumTeams, (competition(Rank, _, Year, _, Teams),
                       length(Teams, NumTeams)), NumTeamsList),
    max_list(NumTeamsList, MaxNumTeams),
    findall(Year, (competition(Rank, _, Year, _, Teams),
                   length(Teams, MaxNumTeams)), YearList).

% 2 Найти вид спорта, в котором выступает заданная команда;
sportByTeam(TeamName, Sport) :-
    competition(_, Sport, _, _, Teams),
    member(team(TeamName, _, _), Teams).

% 3 Найти все команды, которые участвовали в Олимпийских играх по
% определенному виду спорта.
olympicTeamsBySport(Sport, Teams) :-
    findall(Team,
            (competition('Олимпийские игры', Sport, _, _, TeamsList),
             member(team(Team, _, _), TeamsList)), Teams).

% 4 Найти все команды, участвовавшие в соревнованиях в заданном году;
teamsInYear(Year, Teams) :-
    findall(Team, (competition(_, _, Year, _, TeamsList),
                   member(team(Team, _, _), TeamsList)), Teams).

% 5 Найти все команды определенной страны, у которых были выигрыши.
winningTeamsByCountry(Country, Teams) :-
    findall(Team,
            (competition(_, _, _, _, TeamsList),
             member(team(Team, Country, Results), TeamsList),
             member(result(_, _, 'Выигрыш'), Results)), Teams).
